{"ast":null,"code":"// src/components/SignInForm.jsx\nimport React,{useState}from'react';import{RecaptchaVerifier,signInWithPhoneNumber}from'firebase/auth';import{auth}from'../config/firebaseConfig';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function SignInForm(){const[phone,setPhone]=useState('');const[otp,setOtp]=useState('');const[step,setStep]=useState(1);const[confirmationResult,setConfirmationResult]=useState(null);const setupRecaptcha=()=>{if(!window.recaptchaVerifier){window.recaptchaVerifier=new RecaptchaVerifier('recaptcha-container',{size:'invisible',callback:()=>{// reCAPTCHA solved\n}},auth);}};const handleSendOtp=async()=>{setupRecaptcha();const appVerifier=window.recaptchaVerifier;try{const result=await signInWithPhoneNumber(auth,phone,appVerifier);setConfirmationResult(result);setStep(2);alert('OTP sent successfully!');}catch(error){console.error(error);alert('Failed to send OTP. Check phone format and try again.');}};const handleVerifyOtp=async()=>{try{await confirmationResult.confirm(otp);alert('‚úÖ OTP verified! User logged in.');// TODO: redirect to dashboard or fetch user data\n}catch(error){console.error(error);alert('‚ùå Invalid OTP.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"recaptcha-container\"}),step===1?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block\",children:\"\\uD83D\\uDCF1 Phone Number:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",placeholder:\"+91XXXXXXXXXX\",value:phone,onChange:e=>setPhone(e.target.value),className:\"border px-3 py-2 w-full rounded\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSendOtp,className:\"bg-blue-600 text-white px-4 py-2 rounded\",children:\"Send OTP\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block\",children:\"\\uD83D\\uDD10 Enter OTP:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"123456\",value:otp,onChange:e=>setOtp(e.target.value),className:\"border px-3 py-2 w-full rounded\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleVerifyOtp,className:\"bg-green-600 text-white px-4 py-2 rounded\",children:\"Verify OTP\"})]})]});}","map":{"version":3,"names":["React","useState","RecaptchaVerifier","signInWithPhoneNumber","auth","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","SignInForm","phone","setPhone","otp","setOtp","step","setStep","confirmationResult","setConfirmationResult","setupRecaptcha","window","recaptchaVerifier","size","callback","handleSendOtp","appVerifier","result","alert","error","console","handleVerifyOtp","confirm","className","children","id","type","placeholder","value","onChange","e","target","onClick"],"sources":["/Users/shrijanakwade/Downloads/stockpilot-app/src/components/SignInForm.jsx"],"sourcesContent":["// src/components/SignInForm.jsx\nimport React, { useState } from 'react';\nimport { RecaptchaVerifier, signInWithPhoneNumber } from 'firebase/auth';\nimport { auth } from '../config/firebaseConfig';\n\n\nexport default function SignInForm() {\n  const [phone, setPhone] = useState('');\n  const [otp, setOtp] = useState('');\n  const [step, setStep] = useState(1);\n  const [confirmationResult, setConfirmationResult] = useState(null);\n\n  const setupRecaptcha = () => {\n    if (!window.recaptchaVerifier) {\n      window.recaptchaVerifier = new RecaptchaVerifier(\n        'recaptcha-container',\n        {\n          size: 'invisible',\n          callback: () => {\n            // reCAPTCHA solved\n          },\n        },\n        auth\n      );\n    }\n  };\n\n  const handleSendOtp = async () => {\n    setupRecaptcha();\n    const appVerifier = window.recaptchaVerifier;\n\n    try {\n      const result = await signInWithPhoneNumber(auth, phone, appVerifier);\n      setConfirmationResult(result);\n      setStep(2);\n      alert('OTP sent successfully!');\n    } catch (error) {\n      console.error(error);\n      alert('Failed to send OTP. Check phone format and try again.');\n    }\n  };\n\n  const handleVerifyOtp = async () => {\n    try {\n      await confirmationResult.confirm(otp);\n      alert('‚úÖ OTP verified! User logged in.');\n      // TODO: redirect to dashboard or fetch user data\n    } catch (error) {\n      console.error(error);\n      alert('‚ùå Invalid OTP.');\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <div id=\"recaptcha-container\"></div>\n\n      {step === 1 ? (\n        <>\n          <label className=\"block\">üì± Phone Number:</label>\n          <input\n            type=\"tel\"\n            placeholder=\"+91XXXXXXXXXX\"\n            value={phone}\n            onChange={(e) => setPhone(e.target.value)}\n            className=\"border px-3 py-2 w-full rounded\"\n          />\n          <button onClick={handleSendOtp} className=\"bg-blue-600 text-white px-4 py-2 rounded\">\n            Send OTP\n          </button>\n        </>\n      ) : (\n        <>\n          <label className=\"block\">üîê Enter OTP:</label>\n          <input\n            type=\"text\"\n            placeholder=\"123456\"\n            value={otp}\n            onChange={(e) => setOtp(e.target.value)}\n            className=\"border px-3 py-2 w-full rounded\"\n          />\n          <button onClick={handleVerifyOtp} className=\"bg-green-600 text-white px-4 py-2 rounded\">\n            Verify OTP\n          </button>\n        </>\n      )}\n    </div>\n  );\n}\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,iBAAiB,CAAEC,qBAAqB,KAAQ,eAAe,CACxE,OAASC,IAAI,KAAQ,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,CAAAC,IAAA,IAAAC,KAAA,yBAGhD,cAAe,SAAS,CAAAC,UAAUA,CAAA,CAAG,CACnC,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACa,GAAG,CAAEC,MAAM,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAClC,KAAM,CAACe,IAAI,CAAEC,OAAO,CAAC,CAAGhB,QAAQ,CAAC,CAAC,CAAC,CACnC,KAAM,CAACiB,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CAElE,KAAM,CAAAmB,cAAc,CAAGA,CAAA,GAAM,CAC3B,GAAI,CAACC,MAAM,CAACC,iBAAiB,CAAE,CAC7BD,MAAM,CAACC,iBAAiB,CAAG,GAAI,CAAApB,iBAAiB,CAC9C,qBAAqB,CACrB,CACEqB,IAAI,CAAE,WAAW,CACjBC,QAAQ,CAAEA,CAAA,GAAM,CACd;AAAA,CAEJ,CAAC,CACDpB,IACF,CAAC,CACH,CACF,CAAC,CAED,KAAM,CAAAqB,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChCL,cAAc,CAAC,CAAC,CAChB,KAAM,CAAAM,WAAW,CAAGL,MAAM,CAACC,iBAAiB,CAE5C,GAAI,CACF,KAAM,CAAAK,MAAM,CAAG,KAAM,CAAAxB,qBAAqB,CAACC,IAAI,CAAEQ,KAAK,CAAEc,WAAW,CAAC,CACpEP,qBAAqB,CAACQ,MAAM,CAAC,CAC7BV,OAAO,CAAC,CAAC,CAAC,CACVW,KAAK,CAAC,wBAAwB,CAAC,CACjC,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CACpBD,KAAK,CAAC,uDAAuD,CAAC,CAChE,CACF,CAAC,CAED,KAAM,CAAAG,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAI,CACF,KAAM,CAAAb,kBAAkB,CAACc,OAAO,CAAClB,GAAG,CAAC,CACrCc,KAAK,CAAC,iCAAiC,CAAC,CACxC;AACF,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CACpBD,KAAK,CAAC,gBAAgB,CAAC,CACzB,CACF,CAAC,CAED,mBACElB,KAAA,QAAKuB,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxB5B,IAAA,QAAK6B,EAAE,CAAC,qBAAqB,CAAM,CAAC,CAEnCnB,IAAI,GAAK,CAAC,cACTN,KAAA,CAAAF,SAAA,EAAA0B,QAAA,eACE5B,IAAA,UAAO2B,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,4BAAgB,CAAO,CAAC,cACjD5B,IAAA,UACE8B,IAAI,CAAC,KAAK,CACVC,WAAW,CAAC,eAAe,CAC3BC,KAAK,CAAE1B,KAAM,CACb2B,QAAQ,CAAGC,CAAC,EAAK3B,QAAQ,CAAC2B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC1CL,SAAS,CAAC,iCAAiC,CAC5C,CAAC,cACF3B,IAAA,WAAQoC,OAAO,CAAEjB,aAAc,CAACQ,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,UAErF,CAAQ,CAAC,EACT,CAAC,cAEHxB,KAAA,CAAAF,SAAA,EAAA0B,QAAA,eACE5B,IAAA,UAAO2B,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,yBAAa,CAAO,CAAC,cAC9C5B,IAAA,UACE8B,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,QAAQ,CACpBC,KAAK,CAAExB,GAAI,CACXyB,QAAQ,CAAGC,CAAC,EAAKzB,MAAM,CAACyB,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CACxCL,SAAS,CAAC,iCAAiC,CAC5C,CAAC,cACF3B,IAAA,WAAQoC,OAAO,CAAEX,eAAgB,CAACE,SAAS,CAAC,2CAA2C,CAAAC,QAAA,CAAC,YAExF,CAAQ,CAAC,EACT,CACH,EACE,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}